## Cosmos跨链



实现跨链需要做到：

1. 共识算法需要具备及时最终性，也就是在出块之后，需要快速确认为不可逆(固定不变)
2. 交易确认需要高效独立的证明方法，目前的方法都是基础Merkle证明



### IBC

### PegZone

基于Cosmos-SDK开发的区块链能够轻松满足实时最终性，然而现存的Bitcoin和Ethereum这类使用POW共识的区块链不具备此特点，只能属于最终概率性，无法防止区块链的回滚。对于这类链，团队使用PegZone方案解决。

PegZone本身是一条代理链，实时跟踪原始链的状态，通过设定一个安全阈值，等待原始链区块增长数达到安全阈值时就认为原始链的状态达到了伪实时最终性(回滚概率小)，这点和轻客户端钱包验证是相同的原理，例如比特币安全阈值通常设置为6，以太坊安全阈值可以设置为20或者100。PegZone本身具备实时最终性，就可以通过IBC与hub相连，从而实现跨链。

#### PegZone组成

1. **Smart Contract：**资产托管的角色，保管以太坊中的代币和Cosmos中的代币。主要提供了lock、unlock、mint、burn四个方法
2. **Witness：**是一个以太坊全节点，监听以太坊合约的event，并等待100个区块产生后，封装WitnessTx提交到PegZone中来证明在以太坊内状态更改
3. **PegZone：**PegZone是基于Tendermint的区块链，负责维护用户的账户信息，允许用户之间资产的转移，并提供交易查询
4. **Signer：**使用secp256k1对交易进行签名，以便签名能够高效的被智能合约验证，对应于智能合约的校验者公钥集合
5. **Relayer：** 中继器负责交易转发。将所有Signer签名后的SignTx转发到smart contract中



### 跨链问题

1. 对于没有基于cosmos-sdk开发，但符合实时最终性的链无法使用IBC，无法做到异构链的兼容。它们可能使用不同的：
   1. 签名算法
   2. 序列化方法
   3. Merkle证明的方式